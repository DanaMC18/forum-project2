
<a href="/topics"> Back to Topics </a>

<div id="topic-container">


  <h2><%= @topic.title %></h2>

  <a href="/users/<%=@topic.user_id%>"> <%= @topic.user.username %> </a>


  <div id="topic-content">
    
    <p> <%= @topic.content %> </p>


    <!-- EDIT TOPIC -->
    <!-- only seen by user who created it -->
    <% if @topic.user_id == session[:user_id] %>

      <a href="/topics/<%= @topic.id %>/edit"> Edit </a>

    <% end %>


  </div> <!--content-->


  <!-- COMMENTS -->
  <!-- Need if/else because .each does not work if there is only one comment -->
  <div id="comments-container">

    <h3>Comments:</h3>


    <% if @comment %>

      <div class="comment-content">


        <a href="/users/<%=@comment.user_id%>"> <%= @comment.user.username %>: </a>

        <p> At: <%= @comment.pretty_time %> </p>
        
        <p> <%= @comment.content %> </p>

        <p> <%= @comment.like_count %> </p>


        <!-- LIKE COMMENT BUTTON -->
        <!-- Only if a logged in member can you like -->
        <form method="POST" action="topics/<%= @topic.id %>/comments/<%= @comment.id %>/likes">

          <button>Like</button>

        </form>


        <br>

      </div> <!--comment content -->

    <% else %>

      <% @comments.each do |comment| %>

        <div class="comment-content">


          <a href="/users/<%=comment.user_id%>"> <%= comment.user.username %>: </a>

          <p> At: <%= comment.pretty_time %> </p>
          
          <p> <%= comment.content %> </p>

          <p> Likes: <%= comment.like_count %> </p>


          <!-- LIKE COMMENT -->
          <!-- Only if a logged in member can you like -->
          <% if @user %>

            <form method="POST" action="/topics/<%= @topic.id %>/comments/<%= comment.id %>/likes">

            <button>Like</button>

            </form>

          <% end %>

          <br>

        </div> <!-- comment content -->

      <% end %> <!-- .each -->

    <% end %> <!-- if/else -->

    

    <!-- NEW COMMENT FORM  -->
    <!-- Seen only by someone logged in -->
    <% if @user %>
     
      <h3> Add Comment: </h3>

      <form method="POST" action="/topics/<%= @topic.id %>/comments/new">

        <p> Write Your Post Below </p>
        <textarea name="content" cols="100" rows="20"></textarea>
        <br>
        <input type="submit" value="Add Comment">

      </form>

    <% else %>

      <h3> Want to join the conversation? <a href="/"> Log In! </a> </h3>

    <% end %>


  </div> <!--comments-container-->

</div><!--topic-container-->














